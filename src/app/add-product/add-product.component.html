<div class="container my-4">
    <p-toast position="top-left"/>
    <div class="my-4">
        <h2 class="display-6 d-inline">Add Product</h2>
        <a class="btn btn-outline-info d-inline float-end" routerLink="/subcategories">Back</a>
    </div>
    <hr>

    <div class="w-50 mt-5 m-auto p-4">
        <div>
          <div class="p-3">
            <input class="form-control" type="name" (change)="this.getName=name.value" #name placeholder="product name">
          </div>
          <div class="form-floating p-3">
            <textarea class="form-control" (change)="this.getDescription=description.value" #description
              placeholder="Leave a comment here" id="floatingTextarea"></textarea>
            <label for="floatingTextarea">Description</label>
          </div>
          <div class="p-3">
            <select (change)="loadSubcategories(category.value)" #category class="form-select"
              aria-label="Default select example">
              <option disabled selected>choose category</option>
              @for(category of categories; track category._id){
              <option [value]="category._id">{{category.name}}</option>
              }
            </select>
          </div>
          <div class="p-3">
            <select class="form-select" (change)="this.getSubcategory=subcategory.value" #subcategory
              aria-label="Default select example">
              <option disabled selected>choose subcategory</option>
              @for(subcategory of subcategories; track subcategory._id){
              <option [value]="subcategory._id">{{subcategory.name}}</option>
              }
            </select>
          </div>
          <div class="p-3 d-flex justify-content-around">
            <input class="form-control w-25" type="number" (change)="this.getPrice=price.value" #price
              placeholder="price">
            <input class="form-control w-25" type="number" (change)="this.getQuantity=quantity.value" #quantity
              placeholder="quantity">
          </div>
          <div class="p-3 d-flex justify-content-around">
            <div class="w-25">
              <label class="mb-2" for=""> Product Cover</label>
              <p-fileUpload 
                    mode="basic" 
                    chooseLabel="Cover Image" 
                    chooseIcon="pi pi-upload"
                    name="image" 
                    #fileUploader
                    accept="image/*" 
                    maxFileSize="1000000" 
                    [customUpload]="true"
                    (uploadHandler)="setCover($event)" />
            </div>
            <div class="w-25">
              <label class="mb-2" for="">Product Images</label>
              <p-fileUpload 
                    mode="basic" 
                    chooseLabel="Album" 
                    chooseIcon="pi pi-upload"
                    name="image" 
                    #fileUploader
                    accept="image/*" 
                    maxFileSize="1000000" 
                    [multiple] = "true"
                    [customUpload]="true"
                    (uploadHandler)="setImages($event)" />
            </div>
          </div>
          <div class="mt-3">
            <button (click)="createProduct()" class="btn btn-primary mx-3 ">Create</button>
            <a routerLink="/products" class="btn btn-danger">Cancel</a>
          </div>
        </div>
      </div>
      
</div>
    